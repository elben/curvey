<html>
  <head>
    <title>Curvey - A b-spline demo that doesn't suck (as much)</title>
    <link type="text/css" rel="stylesheet" href="default.css"/>
    <script type="text/javascript" src="protovis-d3.2.js"></script>
    <style type="text/css">

#fig {
  width: 900px;
  height: 620px;
}

.header {
  float: right;
  padding-top: 5px;
}

    </style>
  </head>
  <body>
    <div id="canvas">
    <script type="text/javascript+protovis" src="curvey.js">
var w = 896,
    h = 586,
    i = 3,
    interpolate = "linear",
    segmented = false;

var points = new Array();

var vis = new pv.Panel()
    .width(w)
    .height(h)
    .fillStyle("#fff")
    .strokeStyle("#ccc")
    .lineWidth(4)
    .antialias(false)
    .margin(2)
    .event("mousedown", function() (i = points.push(this.mouse()) - 1, this));

vis.render();

vis.add(pv.Dot)
    .data(function() points)
    .left(function(d) d.x)
    .top(function(d) d.y)
    .radius(7)
    .cursor("move")
    .strokeStyle(function() i == this.index ? "#ff7f0e" : "#1f77b4")
    .fillStyle(function() this.strokeStyle().alpha(.2))
    .event("mousedown", pv.Behavior.drag())
    .event("dragstart", function() (i = this.index, this))
    .event("drag", vis);

vis.add(pv.Line)
    .data(function() points)
    .left(function(d) d.x)
    .top(function(d) d.y)
    .interpolate(function() interpolate)
    .segmented(function() segmented)
    .strokeStyle(pv.Colors.category10().by(pv.index))
    .tension(0.5)
    .lineWidth(2);
    
    </script>

      <div class="header">
        <select onchange="interpolate = this.value; vis.render();">
          <option value="linear" selected>linear</option>
          <option value="basis">b-splines</option>
        </select>
      </div>

    </div>
  </body>
</html>

